{"ast":null,"code":"var _jsxFileName = \"/home/iman/Desktop/New Repo/Phoenix/client/src/signUp.js\";\n//     // npm i firebase\n//     //yarn add firebase   \nimport React from 'react';\nimport './signUp.css';\nimport SignIn from './signIn.js';\nimport { Route, Redirect } from 'react-router';\nimport { storage } from './firebase';\nimport Mainprofile from './mainprofile.js';\n\nclass SignUp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      email: '',\n      password: '',\n      image: null,\n      bio: \"\",\n      url: \"\",\n      toggleSignIn: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(e) {\n    if (e.target.files[0]) {\n      const image = e.target.files[0];\n      this.setState(() => ({\n        image\n      }));\n    }\n  }\n\n  handleUpload() {\n    const image = this.state.image;\n    const uploadTask = storage.ref(\"images/\".concat(image.name)).put(image);\n    uploadTask.on(\"state_changed\", snapshot => {}, error => {}, () => {\n      storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n        console.log(url);\n        this.setState({\n          url\n        });\n      });\n    });\n  }\n\n  yourdata(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  server() {\n    const token = localStorage.getItem('token');\n    var that = this;\n    fetch(\"auth/signUp\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        \"username\": this.state.username,\n        \"email\": this.state.email,\n        \"password\": this.state.password\n      })\n    }).then(response => response.json()).then(data => {\n      console.log(data.token);\n      const token = data.token;\n      console.log(data.user);\n      localStorage.setItem('token', token);\n      that.setState({\n        toggleSignIn: true,\n        email: data.user.email\n      }, () => {\n        console.log(\"hi\");\n        that.signUp(that);\n      });\n    });\n  }\n\n  signUp(that) {\n    fetch(\"post/\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        \"username\": this.state.username,\n        \"email\": this.state.email,\n        \"password\": this.state.password,\n        \"bio\": this.state.bio,\n        \"url\": this.state.url\n      })\n    }).then(response => response.json()).then(data => {\n      console.log(data);\n      const token = data.token;\n      localStorage.setItem('token', token);\n\n      for (var i = 0; i < data.length; i++) {\n        if (that.state.email === data[i].email) {\n          if (that.state.password === data[i].password) {\n            that.setState({\n              toggleSignIn: true\n            });\n          }\n        }\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, !this.state.toggleSignIn ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      name: \"image\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.handleUpload.bind(this),\n      className: \"Button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Upload\"), React.createElement(\"img\", {\n      src: this.state.url || 'https://i0.wp.com/addisonavenuemarketing.com/wp-content/uploads/2016/07/facebook-avatar.jpg?fit=690%2C435',\n      alt: \"uploaded image\",\n      height: \"150\",\n      width: \"200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"bio\",\n      onChange: this.yourdata.bind(this),\n      placeholder: \"your bio\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"username\",\n      onChange: this.yourdata.bind(this),\n      placeholder: \"your username\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"email\",\n      onChange: this.yourdata.bind(this),\n      placeholder: \"your email\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      onChange: this.yourdata.bind(this),\n      placeholder: \"your password\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      id: \"button\",\n      onClick: this.server.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Click  to Submit\")) : React.createElement(Mainprofile, {\n      username: this.state.username,\n      email: this.state.email,\n      bio: this.state.bio,\n      url: this.state.url,\n      Redirect: true,\n      to: \"/mainprofile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default SignUp;","map":{"version":3,"sources":["/home/iman/Desktop/New Repo/Phoenix/client/src/signUp.js"],"names":["React","SignIn","Route","Redirect","storage","Mainprofile","SignUp","Component","constructor","props","state","username","email","password","image","bio","url","toggleSignIn","handleChange","bind","e","target","files","setState","handleUpload","uploadTask","ref","name","put","on","snapshot","error","child","getDownloadURL","then","console","log","yourdata","event","value","server","token","localStorage","getItem","that","fetch","method","headers","Accept","body","JSON","stringify","response","json","data","user","setItem","signUp","i","length","render"],"mappings":"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","sourcesContent":["//     // npm i firebase\n//     //yarn add firebase   \nimport React from 'react';\nimport './signUp.css';\nimport SignIn from './signIn.js';\nimport { Route, Redirect } from 'react-router'\nimport { storage } from './firebase';\nimport Mainprofile from './mainprofile.js';\n\n  class SignUp extends React.Component{\n     constructor(props){\n          super(props);\n        this.state = {\n          username:'',        \n          email:'',\n          password:'',\n          image:null,\n          bio:\"\",\n          url:\"\",\n          toggleSignIn: false\n        }\n   this.handleChange = this.handleChange.bind(this);\n\n    }\n\n  handleChange(e) {\n    if (e.target.files[0]) {\n      const image = e.target.files[0];\n      this.setState(() => ({ image }));\n    }\n  }\n\n\n    handleUpload() {\n    const { image } = this.state;\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n     uploadTask.on(\n      `state_changed`,\n      (snapshot) => {\n      },\n      (error) => {},\n      () => {\n        storage.ref(`images`).child(image.name).getDownloadURL().then((url) => {\n          console.log(url);\n          this.setState({ url });\n        });\n      }\n    );\n  }\n\n     yourdata(event){\n        this.setState({[event.target.name]: event.target.value });\n     }\n    server(){\n      const token = localStorage.getItem('token');\n      var that = this;\n      fetch(\"auth/signUp\", {\n        method: \"POST\",\n        headers : {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\"username\":this.state.username,\n        \"email\": this.state.email,\n        \"password\" : this.state.password})\n      }).then((response) => response.json())\n      .then((data)=>{\n        console.log(data.token)\n        const token = data.token\n        console.log(data.user)\n        localStorage.setItem('token', token);\n        that.setState({\n       toggleSignIn: true,\n       email:data.user.email\n        },() => {\n          console.log(\"hi\")\n              that.signUp(that);\n            })\n       \n      })\n    }\n\n    signUp(that) {\n      fetch(\"post/\", {\n        method: \"POST\",\n        headers : {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\"username\":this.state.username,\n        \"email\": this.state.email,\n        \"password\" : this.state.password,\n        \"bio\" : this.state.bio,\n        \"url\": this.state.url\n        } \n        )\n      }).then((response) => response.json())\n      .then((data)=>{\n        console.log(data)\n        const token = data.token\n        localStorage.setItem('token', token);     \n          for (var i = 0 ; i < data.length ; i++ ){\n          if ( that.state.email === data[i].email){\n            if (that.state.password === data[i].password){\n\n              that.setState({\n                toggleSignIn: true\n                \n              }\n              );\n            }\n            }\n        }\n      })\n      }\n\n\n\n\n     render(){\n      return(<div id=\"div\">\n        {!this.state.toggleSignIn ? (\n          <div>\n          <input type=\"file\" name=\"image\" onChange={this.handleChange} />\n            <button onClick={this.handleUpload.bind(this)} className=\"Button\">\n              Upload\n            </button>\n          <img\n              src={\n                this.state.url ||\n                'https://i0.wp.com/addisonavenuemarketing.com/wp-content/uploads/2016/07/facebook-avatar.jpg?fit=690%2C435'\n              }\n              alt=\"uploaded image\"\n              height=\"150\"\n              width=\"200\"\n            />\n            <input  type=\"text\" name = \"bio\" onChange ={this.yourdata.bind(this)} placeholder=\"your bio\" required/> <br />\n            <input  type=\"text\" name = \"username\" onChange ={this.yourdata.bind(this)} placeholder=\"your username\" required/> <br />\n            <input  type=\"text\" name = \"email\" onChange ={this.yourdata.bind(this)} placeholder=\"your email\" required/> <br />\n            <input  type=\"password\" name = \"password\" onChange ={this.yourdata.bind(this)} placeholder=\"your password\" required/> <br />\n            <button id=\"button\" onClick={this.server.bind(this)}>Click  to Submit</button>\n            </div>\n\n        ) : (\n          <Mainprofile              \n            username = {this.state.username} \n\t\t\t    \temail={this.state.email}\n            bio={this.state.bio}\n\t\t\t\t\t  url={this.state.url}  \n            Redirect to=\"/mainprofile\"\n          />\n        )}\n      </div>\n        \n    )}\n  }\n  \n  export default SignUp;\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}